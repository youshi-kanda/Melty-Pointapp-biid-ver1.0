(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[217],{8505:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/store/payment",function(){return t(3634)}])},1540:function(e,s,t){"use strict";t.d(s,{Z:function(){return N}});var l=t(5893),r=t(1163),a=t(1664),n=t.n(a),i=t(8979),d=t(116),c=t(4235),o=t(3750),x=t(3633),m=t(6722),p=t(5264),h=t(2190),b=t(8497),u=t(9073),g=t(8267),j=t(775),f=t(7294);function N(e){let{currentPage:s}=e,t=(0,r.useRouter)(),[a,N]=(0,f.useState)(!1),y=[{icon:i.Z,label:"ダッシュボード",sublabel:"売上・顧客情報",href:"/store",id:"dashboard"},{icon:d.Z,label:"店舗情報",sublabel:"プロフィール・基本情報",href:"/store/profile",id:"profile"},{icon:c.Z,label:"チャージ",sublabel:"アカウントチャージ",href:"/store/charge",id:"charge"},{icon:o.Z,label:"レシート",sublabel:"取引履歴・レシート",href:"/store/receipt",id:"receipt"},{icon:x.Z,label:"月次レポート",sublabel:"売上・統計レポート",href:"/store/reports",id:"reports"},{icon:m.Z,label:"プロモーション",sublabel:"キャンペーン管理",href:"/store/promotions",id:"promotions"},{icon:p.Z,label:"設定",sublabel:"システム設定",href:"/store/settings",id:"settings"}];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>N(!a),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg",children:a?(0,l.jsx)(h.Z,{size:24}):(0,l.jsx)(b.Z,{size:24})}),a&&(0,l.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>N(!1)}),(0,l.jsxs)("aside",{className:"\n          fixed top-0 left-0 h-full w-64 bg-gradient-to-b from-purple-600 via-pink-600 to-purple-700 text-white shadow-2xl z-40 transform transition-transform duration-300\n          ".concat(a?"translate-x-0":"-translate-x-full","\n          lg:translate-x-0\n        "),children:[(0,l.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:(0,l.jsx)(u.Z,{size:24,className:"text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-xl font-bold",children:"Biid Point"}),(0,l.jsx)("p",{className:"text-xs text-purple-200",children:"Management"})]})]})}),(0,l.jsx)("nav",{className:"p-4 space-y-1 overflow-y-auto h-[calc(100vh-280px)]",children:y.map(e=>{let r=e.icon,a=s===e.id||t.pathname===e.href;return(0,l.jsx)(n(),{href:e.href,className:"\n                  block px-4 py-3 rounded-lg transition-all group\n                  ".concat(a?"bg-white/20 backdrop-blur-sm shadow-lg border border-white/20":"hover:bg-white/10","\n                "),onClick:()=>N(!1),children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(r,{size:20,className:a?"text-white":"text-white/80 group-hover:text-white"}),(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)("div",{className:"font-medium text-sm ".concat(a?"text-white":"text-white/90 group-hover:text-white"),children:e.label}),(0,l.jsx)("div",{className:"text-xs text-white/60 mt-0.5",children:e.sublabel})]})]})},e.id)})}),(0,l.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 border-t border-white/10 bg-black/10",children:[(0,l.jsx)("div",{className:"p-4 border-b border-white/10",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center",children:(0,l.jsx)(g.Z,{size:20,className:"text-white"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("div",{className:"text-sm font-medium text-white truncate",children:"店長"}),(0,l.jsx)("div",{className:"text-xs text-purple-200 truncate",children:"store@example.com"})]})]})}),(0,l.jsx)("div",{className:"p-4",children:(0,l.jsxs)("button",{onClick:()=>{console.log("ログアウト"),t.push("/store/login")},className:"flex items-center gap-3 px-4 py-2 w-full rounded-lg text-white hover:bg-white/10 transition-all",children:[(0,l.jsx)(j.Z,{size:18}),(0,l.jsx)("span",{className:"text-sm font-medium",children:"ログアウト"})]})}),(0,l.jsxs)("div",{className:"px-4 pb-4",children:[(0,l.jsx)("div",{className:"text-xs text-purple-200 mb-2",children:"今日の状況"}),(0,l.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between text-white/80",children:[(0,l.jsx)("span",{children:"売上"}),(0,l.jsx)("span",{className:"font-semibold text-white",children:"\xa545,000"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-white/80",children:[(0,l.jsx)("span",{children:"取引数"}),(0,l.jsx)("span",{className:"font-semibold text-white",children:"23"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-white/80",children:[(0,l.jsx)("span",{children:"ポイント発行"}),(0,l.jsx)("span",{className:"font-semibold text-emerald-300",children:"2,340pt"})]})]})]})]})]})]})}},3634:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return g}});var l=t(5893),r=t(7294),a=t(9008),n=t.n(a),i=t(1540),d=t(425),c=t(341),o=t(4235),x=t(6111),m=t(2609),p=t(2190),h=t(3050),b=t(415),u=t(2779);function g(){let[e,s]=(0,r.useState)(""),[t,a]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),[f,N]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[S,Z]=(0,r.useState)(!1),[z,C]=(0,r.useState)(null),F=()=>{Z(!0),setTimeout(()=>{a({id:"USER-001",name:"田中太郎",email:"tanaka@example.com",currentPoints:2450}),Z(!1)},2e3)},L=()=>Math.max(0,(parseFloat(e)||0)-(g&&parseFloat(f)||0));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n(),{children:(0,l.jsx)("title",{children:"決済処理 - Melty+ 店舗管理"})}),(0,l.jsxs)("div",{className:"flex min-h-screen bg-gray-50",children:[(0,l.jsx)(i.Z,{currentPage:"payment"}),(0,l.jsxs)("main",{className:"flex-1 lg:ml-64",children:[(0,l.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-30",children:(0,l.jsxs)("div",{className:"px-6 py-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"決済処理"}),(0,l.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"ポイント決済を処理します"})]})}),(0,l.jsx)("div",{className:"p-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,l.jsx)("div",{className:"lg:col-span-1 space-y-6",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[(0,l.jsx)(d.Z,{size:20,className:"text-purple-600"}),"顧客QRコード"]}),t?(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-semibold text-lg",children:t.name.charAt(0)}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-bold text-gray-900",children:t.name}),(0,l.jsx)("p",{className:"text-xs text-gray-600",children:t.id})]})]}),(0,l.jsx)("div",{className:"pt-2 border-t border-purple-200",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"利用可能ポイント"}),(0,l.jsxs)("span",{className:"text-lg font-bold text-purple-600",children:[t.currentPoints.toLocaleString()," pt"]})]})})]}),(0,l.jsx)("button",{onClick:()=>a(null),className:"w-full py-2 px-4 bg-white border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all",children:"別の顧客をスキャン"})]}):(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsx)("div",{className:"aspect-square rounded-lg border-2 border-dashed flex flex-col items-center justify-center cursor-pointer transition-all ".concat(S?"border-purple-500 bg-purple-50":"border-gray-300 hover:border-purple-400 hover:bg-gray-50"),onClick:F,children:S?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-600 border-t-transparent"}),(0,l.jsx)("p",{className:"mt-4 text-sm text-purple-600 font-medium",children:"スキャン中..."})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c.Z,{size:48,className:"text-gray-400 mb-3"}),(0,l.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"QRコードをスキャン"})]})}),(0,l.jsx)("button",{onClick:F,disabled:S,className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50",children:S?"スキャン中...":"スキャン開始"})]})]})}),(0,l.jsx)("div",{className:"lg:col-span-2",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[(0,l.jsxs)("h2",{className:"text-lg font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,l.jsx)(o.Z,{size:20,className:"text-purple-600"}),"決済金額"]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"金額を入力してください"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(x.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,l.jsx)("input",{type:"number",value:e,onChange:e=>s(e.target.value),placeholder:"0",className:"w-full pl-12 pr-16 py-4 text-3xl font-bold border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:!t}),(0,l.jsx)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-2xl font-bold text-gray-400",children:"円"})]})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"クイック選択"}),(0,l.jsx)("div",{className:"grid grid-cols-4 gap-2",children:[500,1e3,2e3,5e3].map(e=>(0,l.jsxs)("button",{onClick:()=>s(e.toString()),disabled:!t,className:"py-3 px-2 bg-gray-100 hover:bg-purple-100 border border-gray-300 hover:border-purple-400 rounded-lg font-medium text-sm transition-all disabled:opacity-50",children:["\xa5",e.toLocaleString()]},e))})]}),t&&(0,l.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("label",{className:"flex items-center gap-3 cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",checked:g,onChange:e=>j(e.target.checked),className:"w-5 h-5 text-purple-600 rounded"}),(0,l.jsx)("span",{className:"font-medium text-gray-900",children:"ポイントを使用する"})]}),g&&(0,l.jsxs)("div",{className:"mt-3",children:[(0,l.jsx)("label",{className:"block text-sm text-gray-600 mb-2",children:"使用ポイント数"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(m.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:18}),(0,l.jsx)("input",{type:"number",value:f,onChange:e=>N(e.target.value),max:t.currentPoints,placeholder:"0",className:"w-full pl-10 pr-12 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,l.jsx)("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-sm text-gray-500",children:"pt"})]}),(0,l.jsx)("button",{onClick:()=>N(Math.min(t.currentPoints,parseFloat(e)||0).toString()),className:"mt-2 text-sm text-purple-600 hover:text-purple-700 font-medium",children:"全額ポイント使用"})]})]}),e&&parseFloat(e)>0&&(0,l.jsxs)("div",{className:"mb-6 p-6 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border-2 border-purple-200",children:[(0,l.jsx)("h3",{className:"font-bold text-gray-900 mb-4",children:"決済内容"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"商品金額"}),(0,l.jsxs)("span",{className:"text-xl font-bold text-gray-900",children:["\xa5",parseFloat(e).toLocaleString()]})]}),g&&f&&(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"ポイント使用"}),(0,l.jsxs)("span",{className:"text-lg font-semibold text-purple-600",children:["-",parseFloat(f).toLocaleString()," pt"]})]}),(0,l.jsxs)("div",{className:"pt-3 border-t-2 border-purple-300 flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-900 font-semibold",children:"お支払い金額"}),(0,l.jsxs)("span",{className:"text-2xl font-bold text-purple-600",children:["\xa5",L().toLocaleString()]})]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>{s(""),j(!1),N("")},className:"flex-1 py-3 px-4 bg-white border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all",children:"クリア"}),(0,l.jsx)("button",{onClick:()=>{if(!e||0>=parseFloat(e)){alert("金額を入力してください");return}v(!0)},disabled:!t||!e||0>=parseFloat(e),className:"flex-1 py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg disabled:opacity-50",children:"決済実行"})]})]})})]})})]})]}),y&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"決済確認"}),(0,l.jsx)("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:(0,l.jsx)(p.Z,{size:20})})]}),(0,l.jsxs)("div",{className:"space-y-4 mb-6",children:[(0,l.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"顧客名"}),(0,l.jsx)("p",{className:"font-bold text-gray-900",children:null==t?void 0:t.name})]}),(0,l.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"商品金額"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\xa5",parseFloat(e).toLocaleString()]})]}),g&&f&&(0,l.jsxs)("div",{className:"p-4 bg-purple-50 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm text-purple-600 mb-1",children:"ポイント使用"}),(0,l.jsxs)("p",{className:"text-xl font-bold text-purple-600",children:[parseFloat(f).toLocaleString()," pt"]})]}),(0,l.jsxs)("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border-2 border-purple-200",children:[(0,l.jsx)("p",{className:"text-sm text-purple-600 mb-1",children:"お支払い金額"}),(0,l.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["\xa5",L().toLocaleString()]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>v(!1),className:"flex-1 py-3 px-4 bg-white border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50",children:"キャンセル"}),(0,l.jsx)("button",{onClick:()=>{v(!1),C({transactionId:"TXN-".concat(Date.now()),amount:parseFloat(e),pointsUsed:g&&parseFloat(f)||0,finalAmount:L(),timestamp:new Date().toLocaleString("ja-JP")}),k(!0)},className:"flex-1 py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 shadow-lg",children:"確定"})]})]})}),w&&z&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",children:[(0,l.jsxs)("div",{className:"text-center mb-6",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-green-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,l.jsx)(h.Z,{size:32,className:"text-white"})}),(0,l.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済完了！"})]}),(0,l.jsxs)("div",{className:"p-4 bg-gray-50 rounded-lg mb-6 space-y-3",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"取引ID"}),(0,l.jsx)("span",{className:"text-sm font-mono text-gray-900",children:z.transactionId})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"日時"}),(0,l.jsx)("span",{className:"text-sm text-gray-900",children:z.timestamp})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"商品金額"}),(0,l.jsxs)("span",{className:"text-sm font-bold",children:["\xa5",z.amount.toLocaleString()]})]}),z.pointsUsed>0&&(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-600",children:"ポイント使用"}),(0,l.jsxs)("span",{className:"text-sm font-bold text-purple-600",children:["-",z.pointsUsed.toLocaleString()," pt"]})]}),(0,l.jsxs)("div",{className:"flex justify-between pt-2 border-t",children:[(0,l.jsx)("span",{className:"font-semibold",children:"支払額"}),(0,l.jsxs)("span",{className:"text-xl font-bold text-purple-600",children:["\xa5",z.finalAmount.toLocaleString()]})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,l.jsxs)("button",{className:"flex-1 py-2 px-4 bg-white border border-gray-300 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-50",children:[(0,l.jsx)(b.Z,{size:16}),"印刷"]}),(0,l.jsxs)("button",{className:"flex-1 py-2 px-4 bg-white border border-gray-300 rounded-lg flex items-center justify-center gap-2 hover:bg-gray-50",children:[(0,l.jsx)(u.Z,{size:16}),"保存"]})]}),(0,l.jsx)("button",{onClick:()=>{s(""),a(null),j(!1),N(""),k(!1),C(null)},className:"w-full py-3 px-4 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-pink-700 shadow-lg",children:"新しい決済を開始"})]})})]})}}},function(e){e.O(0,[1664,5362,2888,9774,179],function(){return e(e.s=8505)}),_N_E=e.O()}]);