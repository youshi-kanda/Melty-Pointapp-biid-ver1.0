(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8998],{6650:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/login",function(){return s(4502)}])},5925:function(e,t,s){"use strict";s.d(t,{Kb:function(){return i},kG:function(){return r}});let a={BASE_URL:"https://api.biid-point.com",ENDPOINTS:{LOGIN:"/api/auth/login/",REFRESH:"/api/auth/refresh/",LOGOUT:"/api/auth/logout/",PAYMENTS:"/api/core/payments/",PAYMENT_STATUS:"/api/core/payments/status/",MOCK_PAYMENT:"/api/core/payments/mock/",GMOPG_INITIATE:"/api/gmopg/payment/initiate/",GMOPG_STATUS:"/api/gmopg/payment/status/",POINTS_GRANT:"/api/core/points/grant/",POINTS_HISTORY:"/api/core/points/history/",USER_ME:"/api/core/user/me/",HEALTH:"/api/health/",STATUS:"/api/status/"},TIMEOUT:3e4,HEADERS:{"Content-Type":"application/json",Accept:"application/json"}};function r(){{let e=window.location.hostname;if("biid-user.fly.dev"===e||e.includes("biid-user"))return"https://biid-user-api.fly.dev";if("localhost"===e||"127.0.0.1"===e)return"http://localhost:8000"}return"https://biid-user-api.fly.dev"}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(a.BASE_URL).concat(e);try{let e=await fetch(s,{...t,headers:{...a.HEADERS,...t.headers},signal:AbortSignal.timeout(a.TIMEOUT)}),r=e.headers.get("content-type");if(!(null==r?void 0:r.includes("application/json"))){let t=await e.text();if(console.warn("Non-JSON response from API:",{url:s,status:e.status,contentType:r,preview:t.substring(0,200)}),t.includes("<!DOCTYPE")||t.includes("<html"))throw Error("Server returned HTML error page (".concat(e.status,")"))}if(!e.ok)throw Error("API Error: ".concat(e.status," ").concat(e.statusText));return await e.json()}catch(e){throw e instanceof SyntaxError&&e.message.includes("Unexpected token")&&console.error("JSON Parse Error - received invalid response:",{url:s,error:e.message,suggestion:"Check if server is returning HTML instead of JSON"}),console.error("API Call failed:",e),e}}let i={initiate:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"qr";return n(a.ENDPOINTS.PAYMENTS,{method:"POST",body:JSON.stringify({amount:e,payment_method:t})})},checkStatus:e=>n("".concat(a.ENDPOINTS.PAYMENT_STATUS,"?transaction_id=").concat(e)),mock:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return n(a.ENDPOINTS.MOCK_PAYMENT,{method:"POST",body:JSON.stringify({action:e,amount:t})})}}},3832:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]])},5928:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},2126:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},6691:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},4502:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(5893),r=s(7294),n=s(9008),i=s.n(n),o=s(1664),l=s.n(o),c=s(5675),d=s.n(c),m=s(1163),u=s(6691),p=s(2126),h=s(3832),f=s(5928);function x(){let e=(0,m.useRouter)(),[t,s]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[c,x]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[y,N]=(0,r.useState)(""),j=async s=>{s.preventDefault(),N(""),g(!0);try{var a;let s="https://biid-user-api.fly.dev";console.log("Login API URL:","".concat(s,"/api/auth/login/customer/"));let r=await fetch("".concat(s,"/api/auth/login/customer/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:n})}),i=await r.json();r.ok&&i.success&&(null===(a=i.data)||void 0===a?void 0:a.tokens)?(localStorage.setItem("auth_token",i.data.tokens.access),i.data.tokens.refresh&&localStorage.setItem("refresh_token",i.data.tokens.refresh),i.data.user&&localStorage.setItem("user_info",JSON.stringify(i.data.user)),e.push("/user/map")):(N(i.error||i.message||"ログインに失敗しました。メールアドレスとパスワードを確認してください。"),g(!1))}catch(e){console.error("Login error:",e),N("ログイン中にエラーが発生しました。もう一度お試しください。"),g(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(i(),{children:[(0,a.jsx)("title",{children:"Melty+ (メルティプラス) - ログイン"}),(0,a.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,a.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,a.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Comic+Neue:wght@300;400;700&family=Nunito:wght@300;400;500;600;700;800&family=Comfortaa:wght@300;400;500;600;700&family=Quicksand:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Pacifico&family=Great+Vibes&family=Satisfy&family=Fredoka+One&family=Bungee&display=swap",rel:"stylesheet"})]}),(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-white",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute top-32 left-4 md:top-20 md:left-20 w-16 h-16 md:w-20 md:h-20 bg-pink-200 rounded-full opacity-40 animate-pulse"}),(0,a.jsx)("div",{className:"absolute top-48 right-4 md:top-40 md:right-20 w-12 h-12 md:w-16 md:h-16 bg-rose-200 rounded-full opacity-30 animate-bounce"}),(0,a.jsx)("div",{className:"absolute bottom-32 left-8 md:bottom-20 md:left-20 w-20 h-20 md:w-24 md:h-24 bg-pink-100 rounded-full opacity-20 animate-ping"}),(0,a.jsx)("div",{className:"absolute bottom-48 right-6 md:bottom-40 md:right-10 w-10 h-10 md:w-12 md:h-12 bg-rose-300 rounded-full opacity-40 animate-pulse"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-32 h-32 bg-gradient-to-r from-pink-100 to-rose-100 rounded-full opacity-10 animate-bounce"})]}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-180px)]",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl border border-pink-100 p-10 w-full max-w-lg backdrop-blur-sm",children:[(0,a.jsxs)("div",{className:"text-center mb-10",children:[(0,a.jsx)("div",{className:"flex items-center justify-center mb-8",children:(0,a.jsx)(d(),{src:"/melty-logo.jpg",alt:"Melty+",width:200,height:100,className:"object-contain"})}),(0,a.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent mb-3",style:{fontFamily:"Comfortaa, sans-serif"},children:"ユーザーログイン"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",style:{fontFamily:"Nunito, sans-serif"},children:"Melty+アプリへようこそ"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-2xl p-5 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center mb-3",children:[(0,a.jsx)("div",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-bold mr-2",children:"TEST"}),(0,a.jsx)("p",{className:"text-sm font-bold text-blue-800",children:"テスト用アカウント"})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-blue-900",children:"メール:"}),(0,a.jsx)("p",{className:"font-mono text-blue-700 bg-white px-2 py-1 rounded mt-1",children:"demo@biid.jp"})]})]}),(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-blue-900",children:"パスワード:"}),(0,a.jsx)("p",{className:"font-mono text-blue-700 bg-white px-2 py-1 rounded mt-1",children:"DemoPass123!"})]})]})]}),(0,a.jsx)("p",{className:"text-xs text-blue-600 mt-3 italic",children:"※本番稼働時に削除されます"})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[y&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-2xl",children:(0,a.jsx)("p",{className:"text-sm",children:y})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-base font-semibold text-gray-700 mb-3",children:"メールアドレス"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(u.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-pink-400 w-5 h-5"}),(0,a.jsx)("input",{type:"email",name:"email",autoComplete:"off",className:"w-full pl-12 pr-4 py-4 border border-pink-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200 hover:border-pink-300 bg-pink-50/30 text-base",placeholder:"your@example.com",required:!0,value:t,onChange:e=>s(e.target.value)})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-base font-semibold text-gray-700 mb-3",children:"パスワード"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(p.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-pink-400 w-5 h-5"}),(0,a.jsx)("input",{type:c?"text":"password",name:"password",autoComplete:"off",className:"w-full pl-12 pr-14 py-4 border border-pink-200 rounded-2xl focus:ring-2 focus:ring-pink-500 focus:border-transparent transition-all duration-200 hover:border-pink-300 bg-pink-50/30 text-base",placeholder:"パスワードを入力",required:!0,value:n,onChange:e=>o(e.target.value)}),(0,a.jsx)("button",{type:"button",onClick:()=>x(!c),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-pink-400 hover:text-pink-600 transition-colors",children:c?(0,a.jsx)(h.Z,{className:"w-5 h-5"}):(0,a.jsx)(f.Z,{className:"w-5 h-5"})})]})]}),(0,a.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-gradient-to-r from-pink-500 to-rose-500 text-white font-semibold py-4 rounded-2xl hover:from-pink-600 hover:to-rose-600 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 active:scale-95 shadow-lg text-lg",children:b?"ログイン中...":"ログイン"})]}),(0,a.jsxs)("div",{className:"mt-8 text-center",children:[(0,a.jsx)("span",{className:"text-base text-gray-600",children:"新規登録は "}),(0,a.jsx)(l(),{className:"text-base text-rose-600 hover:text-rose-800 font-semibold transition-colors",href:"/user/register",children:"こちら"})]})]})})})]})]})}s(5925)},1163:function(e,t,s){e.exports=s(3079)}},function(e){e.O(0,[1664,554,2888,9774,179],function(){return e(e.s=6650)}),_N_E=e.O()}]);