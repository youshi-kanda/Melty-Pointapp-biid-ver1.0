(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{3373:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/points/ec-request",function(){return s(5723)}])},5925:function(e,t,s){"use strict";s.d(t,{Kb:function(){return l},kG:function(){return r}});let a={BASE_URL:"https://api.biid-point.com",ENDPOINTS:{LOGIN:"/api/auth/login/",REFRESH:"/api/auth/refresh/",LOGOUT:"/api/auth/logout/",PAYMENTS:"/api/core/payments/",PAYMENT_STATUS:"/api/core/payments/status/",MOCK_PAYMENT:"/api/core/payments/mock/",GMOPG_INITIATE:"/api/gmopg/payment/initiate/",GMOPG_STATUS:"/api/gmopg/payment/status/",POINTS_GRANT:"/api/core/points/grant/",POINTS_HISTORY:"/api/core/points/history/",USER_ME:"/api/core/user/me/",HEALTH:"/api/health/",STATUS:"/api/status/"},TIMEOUT:3e4,HEADERS:{"Content-Type":"application/json",Accept:"application/json"}};function r(){{let e=window.location.hostname;if("biid-user.fly.dev"===e||e.includes("biid-user"))return"https://biid-user-api.fly.dev";if("localhost"===e||"127.0.0.1"===e)return"http://localhost:8000"}return"https://biid-user-api.fly.dev"}async function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(a.BASE_URL).concat(e);try{let e=await fetch(s,{...t,headers:{...a.HEADERS,...t.headers},signal:AbortSignal.timeout(a.TIMEOUT)}),r=e.headers.get("content-type");if(!(null==r?void 0:r.includes("application/json"))){let t=await e.text();if(console.warn("Non-JSON response from API:",{url:s,status:e.status,contentType:r,preview:t.substring(0,200)}),t.includes("<!DOCTYPE")||t.includes("<html"))throw Error("Server returned HTML error page (".concat(e.status,")"))}if(!e.ok)throw Error("API Error: ".concat(e.status," ").concat(e.statusText));return await e.json()}catch(e){throw e instanceof SyntaxError&&e.message.includes("Unexpected token")&&console.error("JSON Parse Error - received invalid response:",{url:s,error:e.message,suggestion:"Check if server is returning HTML instead of JSON"}),console.error("API Call failed:",e),e}}let l={initiate:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"qr";return n(a.ENDPOINTS.PAYMENTS,{method:"POST",body:JSON.stringify({amount:e,payment_method:t})})},checkStatus:e=>n("".concat(a.ENDPOINTS.PAYMENT_STATUS,"?transaction_id=").concat(e)),mock:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return n(a.ENDPOINTS.MOCK_PAYMENT,{method:"POST",body:JSON.stringify({action:e,amount:t})})}}},3346:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},341:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},8655:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3050:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7695:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},39:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},6111:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},2553:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},8760:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},2606:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]])},7656:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])},3603:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},116:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("store",[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]])},3283:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},2190:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(1134).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},5723:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return S}});var a=s(5893),r=s(7294),n=s(9008),l=s.n(n),i=s(5675),c=s.n(i),o=s(39),d=s(3050),x=s(7695),h=s(3283),u=s(2553),m=s(8655),p=s(341),y=s(2190),b=s(8760),g=s(116),f=s(6111),j=s(3346),N=s(2606),v=s(3603),k=s(7656),w=s(5925);function S(){let[e,t]=(0,r.useState)("new"),[s,n]=(0,r.useState)([]),[i,S]=(0,r.useState)([]),[Z,_]=(0,r.useState)(null),[T,E]=(0,r.useState)(!1),[M,A]=(0,r.useState)(!1),[P,O]=(0,r.useState)(""),[C,I]=(0,r.useState)(""),[D,q]=(0,r.useState)(""),[H,z]=(0,r.useState)(""),[G,L]=(0,r.useState)(null),[U,R]=(0,r.useState)(""),[F,J]=(0,r.useState)(""),[Y,B]=(0,r.useState)(""),[K,V]=(0,r.useState)(""),[W,X]=(0,r.useState)("");(0,r.useEffect)(()=>{Q(),$()},[]);let Q=async()=>{try{let e=localStorage.getItem("auth_token"),t=await fetch("".concat((0,w.kG)(),"/api/stores/"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();n(e)}}catch(e){console.error("店舗一覧の取得に失敗:",e)}},$=async()=>{try{E(!0);let e=localStorage.getItem("auth_token"),t=await fetch("".concat((0,w.kG)(),"/api/ec/user/requests/"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){let e=await t.json();S(e.requests||[])}}catch(e){console.error("申請履歴の取得に失敗:",e)}finally{E(!1)}},ee=async e=>{if(e.preventDefault(),V(""),X(""),!P||!C||!D||!H||!G){V("全ての必須項目を入力してください");return}try{A(!0);let e=localStorage.getItem("auth_token"),s=new FormData;s.append("store_id",P),s.append("purchase_amount",C),s.append("order_id",D),s.append("purchase_date",H),s.append("receipt_image",G),s.append("receipt_description",F);let a=await fetch("".concat((0,w.kG)(),"/api/ec/receipt/upload/"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s}),r=await a.json();a.ok&&r.success?(X("申請を送信しました。店舗の承認をお待ちください。"),O(""),I(""),q(""),z(""),L(null),R(""),J(""),$(),setTimeout(()=>{t("history"),X("")},3e3)):V(r.error||"申請の送信に失敗しました")}catch(e){console.error("申請エラー:",e),V("申請の送信中にエラーが発生しました")}finally{A(!1)}},et=async e=>{if(Y.trim())try{let t=localStorage.getItem("auth_token");if((await fetch("".concat((0,w.kG)(),"/api/ec/requests/").concat(e,"/messages/"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({message:Y})})).ok){B("");let s=await fetch("".concat((0,w.kG)(),"/api/ec/user/requests/").concat(e,"/"),{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>e.json());_(s.request)}}catch(e){console.error("メッセージ送信エラー:",e)}},es=e=>{let t={pending:{bg:"bg-yellow-100",text:"text-yellow-700",icon:o.Z,label:"承認待ち"},approved:{bg:"bg-blue-100",text:"text-blue-700",icon:d.Z,label:"承認済み"},rejected:{bg:"bg-red-100",text:"text-red-700",icon:x.Z,label:"拒否"},completed:{bg:"bg-green-100",text:"text-green-700",icon:d.Z,label:"完了"}}[e],s=t.icon;return(0,a.jsxs)("span",{className:"".concat(t.bg," ").concat(t.text," px-3 py-1 rounded-full text-xs font-bold flex items-center space-x-1"),children:[(0,a.jsx)(s,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:t.label})]})};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l(),{children:(0,a.jsx)("title",{children:"EC購入ポイント申請 - Melty+"})}),(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-purple-50",children:(0,a.jsxs)("div",{className:"px-4 py-6 max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"EC購入ポイント申請"}),(0,a.jsx)("p",{className:"text-gray-600",children:"レシートをアップロードしてポイントを申請"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-2 mb-6 flex space-x-2",children:[(0,a.jsxs)("button",{onClick:()=>t("new"),className:"flex-1 py-3 px-4 rounded-xl font-bold transition-all ".concat("new"===e?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)(h.Z,{className:"w-5 h-5 inline mr-2"}),"新規申請"]}),(0,a.jsxs)("button",{onClick:()=>t("history"),className:"flex-1 py-3 px-4 rounded-xl font-bold transition-all ".concat("history"===e?"bg-gradient-to-r from-pink-500 to-rose-500 text-white shadow-lg":"text-gray-600 hover:bg-gray-100"),children:[(0,a.jsx)(u.Z,{className:"w-5 h-5 inline mr-2"}),"申請履歴"]})]}),"new"===e&&(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-pink-500 to-rose-500 rounded-xl flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsx)("span",{children:"EC購入ポイント申請"})]}),(0,a.jsx)("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-4 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,a.jsx)("p",{className:"font-bold mb-1",children:"申請の流れ"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[(0,a.jsx)("li",{children:"レシート画像と購入情報を入力して申請"}),(0,a.jsx)("li",{children:"店舗が内容を確認"}),(0,a.jsx)("li",{children:"承認されるとポイントが付与されます"})]})]})]})}),K&&(0,a.jsx)("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-4 mb-4",children:(0,a.jsx)("p",{className:"text-red-700 text-sm",children:K})}),W&&(0,a.jsx)("div",{className:"bg-green-50 border-2 border-green-200 rounded-2xl p-4 mb-4",children:(0,a.jsx)("p",{className:"text-green-700 text-sm font-bold",children:W})}),(0,a.jsxs)("form",{onSubmit:ee,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[(0,a.jsx)(p.Z,{className:"w-4 h-4 inline mr-1"}),"レシート画像 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-2xl p-6 text-center hover:border-pink-400 transition-colors cursor-pointer",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s){L(s);let e=new FileReader;e.onloadend=()=>{R(e.result)},e.readAsDataURL(s)}},className:"hidden",id:"receipt-upload"}),(0,a.jsx)("label",{htmlFor:"receipt-upload",className:"cursor-pointer",children:U?(0,a.jsxs)("div",{className:"relative mx-auto",style:{maxWidth:"400px",height:"256px"},children:[(0,a.jsx)(c(),{src:U,alt:"レシート",fill:!0,className:"object-contain rounded-xl",unoptimized:!0}),(0,a.jsx)("button",{type:"button",onClick:e=>{e.preventDefault(),L(null),R("")},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-2 hover:bg-red-600 z-10",children:(0,a.jsx)(y.Z,{className:"w-4 h-4"})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.Z,{className:"w-16 h-16 mx-auto text-gray-400 mb-2"}),(0,a.jsx)("p",{className:"text-gray-600",children:"クリックして画像を選択"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"JPG, PNG形式"})]})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 inline mr-1"}),"店舗 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("select",{value:P,onChange:e=>O(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-400 focus:outline-none",required:!0,children:[(0,a.jsx)("option",{value:"",children:"店舗を選択"}),s.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 inline mr-1"}),"購入金額 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"number",value:C,onChange:e=>I(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-400 focus:outline-none",placeholder:"5000",required:!0}),C&&(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["付与予定ポイント: ",(0,a.jsxs)("span",{className:"font-bold text-pink-600",children:[Math.floor(Number(C)/100)," pt"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4 inline mr-1"}),"注文ID ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",value:D,onChange:e=>q(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-400 focus:outline-none",placeholder:"EC-12345",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 inline mr-1"}),"購入日 ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"date",value:H,onChange:e=>z(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-400 focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"備考（任意）"}),(0,a.jsx)("textarea",{value:F,onChange:e=>J(e.target.value),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:border-pink-400 focus:outline-none",rows:3,placeholder:"購入商品の詳細など"})]}),(0,a.jsx)("button",{type:"submit",disabled:M,className:"w-full bg-gradient-to-r from-pink-500 to-rose-500 text-white py-4 rounded-xl font-bold text-lg hover:from-pink-600 hover:to-rose-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:M?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(N.Z,{className:"w-5 h-5 animate-spin"}),(0,a.jsx)("span",{children:"送信中..."})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"申請を送信"})]})})]})]}),"history"===e&&(0,a.jsx)("div",{className:"space-y-4",children:T?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(N.Z,{className:"w-12 h-12 animate-spin text-pink-500 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600 mt-4",children:"読み込み中..."})]}):0===i.length?(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-12 text-center",children:[(0,a.jsx)(u.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"申請履歴がありません"})]}):i.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-xl p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:e.store_name}),es(e.status)]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"購入金額:"}),(0,a.jsxs)("span",{className:"font-bold text-gray-800 ml-2",children:["\xa5",Number(e.purchase_amount).toLocaleString()]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"付与ポイント:"}),(0,a.jsxs)("span",{className:"font-bold text-pink-600 ml-2",children:[e.points_to_award," pt"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"注文ID:"}),(0,a.jsx)("span",{className:"font-mono text-gray-800 ml-2",children:e.order_id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"申請日:"}),(0,a.jsx)("span",{className:"text-gray-800 ml-2",children:new Date(e.created_at).toLocaleDateString("ja-JP")})]})]})]}),(0,a.jsx)("button",{onClick:()=>_((null==Z?void 0:Z.id)===e.id?null:e),className:"ml-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-xl text-sm font-bold transition-colors",children:(null==Z?void 0:Z.id)===e.id?"閉じる":"詳細"})]}),(null==Z?void 0:Z.id)===e.id&&(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.receipt_image&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("h4",{className:"font-bold text-gray-700 mb-2",children:"レシート画像"}),(0,a.jsx)("div",{className:"relative mx-auto border-2 border-gray-200 rounded-xl",style:{maxWidth:"400px",height:"256px"},children:(0,a.jsx)(c(),{src:e.receipt_image,alt:"レシート",fill:!0,className:"object-contain rounded-xl",unoptimized:!0})})]}),"rejected"===e.status&&e.rejection_reason&&(0,a.jsxs)("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-4 mb-4",children:[(0,a.jsx)("h4",{className:"font-bold text-red-700 mb-1",children:"拒否理由"}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:e.rejection_reason})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4",children:[(0,a.jsxs)("h4",{className:"font-bold text-gray-700 mb-3 flex items-center space-x-2",children:[(0,a.jsx)(k.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"メッセージ"})]}),(0,a.jsx)("div",{className:"space-y-3 mb-4 max-h-64 overflow-y-auto",children:e.messages&&e.messages.length>0?e.messages.map(e=>(0,a.jsxs)("div",{className:"p-3 rounded-xl ".concat(e.is_from_store?"bg-blue-100 ml-8":"bg-white mr-8"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsx)("span",{className:"text-xs font-bold text-gray-700",children:e.is_from_store?"\uD83C\uDFEA 店舗":"\uD83D\uDC64 あなた"}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleString("ja-JP")})]}),(0,a.jsx)("p",{className:"text-sm text-gray-800",children:e.message})]},e.id)):(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"メッセージはありません"})}),"pending"===e.status&&(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("input",{type:"text",value:Y,onChange:e=>B(e.target.value),placeholder:"メッセージを入力...",className:"flex-1 px-4 py-2 rounded-xl border-2 border-gray-200 focus:border-pink-400 focus:outline-none text-sm",onKeyPress:t=>{"Enter"===t.key&&et(e.id)}}),(0,a.jsx)("button",{onClick:()=>et(e.id),disabled:!Y.trim(),className:"px-4 py-2 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl font-bold hover:from-pink-600 hover:to-rose-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)(v.Z,{className:"w-5 h-5"})})]})]})]})]},e.id))})]})})]})}}},function(e){e.O(0,[554,2888,9774,179],function(){return e(e.s=3373)}),_N_E=e.O()}]);