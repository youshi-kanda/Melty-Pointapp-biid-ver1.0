(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8872],{2263:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/profile",function(){return r(3207)}])},3346:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(1134).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3645:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(1134).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},6691:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(1134).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},2042:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(1134).Z)("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},1700:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(1134).Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},9819:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(1134).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},3416:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(1134).Z)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},2190:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(1134).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},3207:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return _}});var t=r(5893),a=r(7294),n=r(3664),l=r(8267),i=r(2042),d=r(9819),o=r(2190),c=r(6691),m=r(1700),x=r(3645),u=r(3350),h=r(3346),p=r(1134);let g=(0,p.Z)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]),f=(0,p.Z)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);var b=r(3416);let y="https://biid-user.fly.dev";function j(){return localStorage.getItem("auth_token")}async function N(){let e=await fetch("".concat(y,"/api/industries/"));if(!e.ok)throw Error("業種データの取得に失敗しました");return await e.json()}async function v(){let e=j();if(!e)throw Error("認証が必要です");let s=await fetch("".concat(y,"/api/user/profile/"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok)throw Error("プロフィールの取得に失敗しました");return(await s.json()).data}async function k(e){let s=j();if(!s)throw Error("認証が必要です");let r=await fetch("".concat(y,"/api/user/profile/"),{method:"PATCH",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error((await r.json()).error||"プロフィールの更新に失敗しました");return(await r.json()).data}let w=["北海道","青森県","岩手県","宮城県","秋田県","山形県","福島県","茨城県","栃木県","群馬県","埼玉県","千葉県","東京都","神奈川県","新潟県","富山県","石川県","福井県","山梨県","長野県","岐阜県","静岡県","愛知県","三重県","滋賀県","京都府","大阪府","兵庫県","奈良県","和歌山県","鳥取県","島根県","岡山県","広島県","山口県","徳島県","香川県","愛媛県","高知県","福岡県","佐賀県","長崎県","熊本県","大分県","宮崎県","鹿児島県","沖縄県"],Z=[{value:"専業",label:"専業"},{value:"副業",label:"副業"}];function _(){var e;let[s,r]=(0,a.useState)(!1),[p,y]=(0,a.useState)(!0),[j,_]=(0,a.useState)(!1),[z,C]=(0,a.useState)(null),[M,E]=(0,a.useState)([]),[S,T]=(0,a.useState)({lastName:"太郎",firstName:"ユーザー",email:"user@example.com",phone:"090-1234-5678",address:"東京都渋谷区...",birthday:"1990-01-01",work_region:"",industry:"",employment_type:"",phone_verified:!1});(0,a.useEffect)(()=>{V(),A()},[]);let V=async()=>{try{y(!0),C(null);let e=await v();T(s=>({...s,email:e.email,phone:e.phone||"",work_region:e.work_region||"",industry:e.industry||"",employment_type:e.employment_type||"",phone_verified:e.phone_verified}))}catch(e){console.error("プロフィール読み込みエラー:",e),C("プロフィールの読み込みに失敗しました")}finally{y(!1)}},A=async()=>{try{let e=await N();E(e)}catch(e){console.error("業種データ読み込みエラー:",e)}},H=async()=>{try{_(!0),C(null),await k({phone:S.phone||void 0,work_region:S.work_region||void 0,industry:S.industry||void 0,employment_type:S.employment_type||void 0}),r(!1),await V()}catch(e){console.error("保存エラー:",e),C(e.message||"プロフィールの保存に失敗しました")}finally{_(!1)}},O=(e,s)=>{T(r=>({...r,[e]:s}))};return(0,t.jsx)(n.Z,{title:"マイページ - Melty+",children:(0,t.jsxs)("div",{className:"px-4 py-6",children:[z&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-2xl text-red-600",children:z}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-5 mb-6 border border-pink-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-pink-500 to-rose-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(l.Z,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-pink-600 to-rose-600 bg-clip-text text-transparent",children:"プロフィール"}),(0,t.jsx)("p",{className:"text-gray-600",children:"アカウント情報の管理"})]})]}),s?(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("button",{onClick:H,className:"flex items-center space-x-2 px-4 py-2 rounded-2xl shadow-lg transition-all duration-200 bg-gradient-to-r from-pink-500 to-rose-500 text-white transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",disabled:j,children:[(0,t.jsx)(d.Z,{size:16}),(0,t.jsx)("span",{children:j?"保存中...":"保存"})]}),(0,t.jsxs)("button",{onClick:()=>{V(),r(!1),C(null)},className:"flex items-center space-x-2 px-4 py-2 rounded-2xl shadow-lg transition-all duration-200 bg-gray-200 text-gray-700 transform hover:scale-105",disabled:j,children:[(0,t.jsx)(o.Z,{size:16}),(0,t.jsx)("span",{children:"キャンセル"})]})]}):(0,t.jsxs)("button",{onClick:()=>r(!0),className:"flex items-center space-x-2 px-4 py-2 rounded-2xl shadow-lg transition-all duration-200 bg-gradient-to-r from-pink-500 to-rose-500 text-white transform hover:scale-105",disabled:p,children:[(0,t.jsx)(i.Z,{size:16}),(0,t.jsx)("span",{children:p?"読み込み中...":"編集"})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-pink-200",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold text-gray-800 mb-5 flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-500 to-rose-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(l.Z,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("span",{children:"基本情報"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(l.Z,{className:"inline mr-2",size:16}),"姓"]}),s?(0,t.jsx)("input",{type:"text",value:S.lastName,onChange:e=>O("lastName",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.lastName})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(l.Z,{className:"inline mr-2",size:16}),"名"]}),s?(0,t.jsx)("input",{type:"text",value:S.firstName,onChange:e=>O("firstName",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.firstName})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(c.Z,{className:"inline mr-2",size:16}),"メールアドレス"]}),s?(0,t.jsx)("input",{type:"email",value:S.email,onChange:e=>O("email",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.email})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(m.Z,{className:"inline mr-2",size:16}),"電話番号",S.phone_verified&&(0,t.jsxs)("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs bg-green-100 text-green-700",children:[(0,t.jsx)(x.Z,{size:12,className:"mr-1"}),"認証済み"]})]}),s?(0,t.jsx)("input",{type:"tel",value:S.phone,onChange:e=>O("phone",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"090-1234-5678"}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.phone||"未設定"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(u.Z,{className:"inline mr-2",size:16}),"住所"]}),s?(0,t.jsx)("input",{type:"text",value:S.address,onChange:e=>O("address",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.address})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(h.Z,{className:"inline mr-2",size:16}),"生年月日"]}),s?(0,t.jsx)("input",{type:"date",value:S.birthday,onChange:e=>O("birthday",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.birthday})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-pink-200 mt-6",children:[(0,t.jsxs)("h2",{className:"text-lg font-bold text-gray-800 mb-5 flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-500 to-rose-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(g,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("span",{children:"お仕事情報（Melty連携用）"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(u.Z,{className:"inline mr-2",size:16}),"勤務地（都道府県）"]}),s?(0,t.jsxs)("select",{value:S.work_region,onChange:e=>O("work_region",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"選択してください"}),w.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.work_region||"未設定"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(f,{className:"inline mr-2",size:16}),"業種"]}),s?(0,t.jsxs)("select",{value:S.industry,onChange:e=>O("industry",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"選択してください"}),M.map(e=>(0,t.jsx)("option",{value:e.code,children:e.name},e.code))]}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.industry?(null===(e=M.find(e=>e.code===S.industry))||void 0===e?void 0:e.name)||S.industry:"未設定"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,t.jsx)(g,{className:"inline mr-2",size:16}),"雇用形態"]}),s?(0,t.jsxs)("select",{value:S.employment_type,onChange:e=>O("employment_type",e.target.value),className:"w-full p-3 border border-pink-200 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[(0,t.jsx)("option",{value:"",children:"選択してください"}),Z.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}):(0,t.jsx)("p",{className:"p-3 bg-gray-50 rounded-lg",children:S.employment_type||"未設定"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-pink-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-5 flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-500 to-rose-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(b.Z,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("span",{children:"アカウント情報"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"会員ID"}),(0,t.jsx)("p",{className:"font-mono text-sm",children:"TEST001"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"登録日"}),(0,t.jsx)("p",{className:"text-sm",children:"2024年12月15日"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"ランク"}),(0,t.jsx)("p",{className:"text-sm",children:"ゴールド会員"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-5 border border-pink-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-5 flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-pink-500 to-rose-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(b.Z,{className:"w-4 h-4 text-white"})}),(0,t.jsx)("span",{children:"セキュリティ"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("button",{className:"w-full text-left p-3 border border-pink-200 rounded-2xl hover:bg-pink-50 transition-all duration-200",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"パスワード変更"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"セキュリティ強化のため定期的に変更"})]}),(0,t.jsxs)("button",{className:"w-full text-left p-3 border border-pink-200 rounded-2xl hover:bg-pink-50 transition-all duration-200",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:"2段階認証"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"現在: 無効"})]})]})]})]})]})]})})}}},function(e){e.O(0,[554,3664,2888,9774,179],function(){return e(e.s=2263)}),_N_E=e.O()}]);