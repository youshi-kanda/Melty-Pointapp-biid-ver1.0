(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7190],{3241:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/transactions",function(){return t(4801)}])},6909:function(e,s,t){"use strict";t.d(s,{Z:function(){return b}});var a=t(5893),l=t(1163),r=t(1664),i=t.n(r),n=t(8979),d=t(9176),c=t(116),x=t(3750),o=t(9073),m=t(3633),h=t(5264),u=t(9305),p=t(2190),g=t(8497),j=t(3416),f=t(775),N=t(7294);function b(e){let{currentPage:s}=e,t=(0,l.useRouter)(),[r,b]=(0,N.useState)(!1),v=[{icon:n.Z,label:"ダッシュボード",href:"/admin",id:"dashboard"},{icon:d.Z,label:"ユーザー管理",href:"/admin/users",id:"users"},{icon:c.Z,label:"店舗管理",href:"/admin/stores",id:"stores"},{icon:x.Z,label:"取引管理",href:"/admin/transactions",id:"transactions"},{icon:o.Z,label:"ギフト管理",href:"/admin/gifts",id:"gifts"},{icon:m.Z,label:"レポート",href:"/admin/reports",id:"reports"},{icon:h.Z,label:"システム設定",href:"/admin/settings",id:"settings"},{icon:u.Z,label:"機能管理",href:"/admin/features",id:"features"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>b(!r),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg",children:r?(0,a.jsx)(p.Z,{size:24}):(0,a.jsx)(g.Z,{size:24})}),r&&(0,a.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>b(!1)}),(0,a.jsxs)("aside",{className:"\n          fixed top-0 left-0 h-full w-64 bg-slate-800 text-slate-300 shadow-2xl z-40 transform transition-transform duration-300\n          ".concat(r?"translate-x-0":"-translate-x-full","\n          lg:translate-x-0\n        "),children:[(0,a.jsx)("div",{className:"p-5 border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.Z,{className:"w-10 h-10 text-white flex-shrink-0",strokeWidth:1.5}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold text-white whitespace-nowrap",children:"Melty+ 管理画面"}),(0,a.jsx)("p",{className:"text-slate-400 text-xs",children:"Admin Dashboard"})]})]})}),(0,a.jsx)("nav",{className:"p-3 space-y-1 overflow-y-auto h-[calc(100vh-165px)]",children:v.map(e=>{let l=e.icon,r=s===e.id||t.pathname===e.href;return(0,a.jsxs)(i(),{href:e.href,className:"\n                  flex items-center gap-2.5 px-3 py-2.5 rounded-lg transition-all\n                  ".concat(r?"bg-slate-700 text-white shadow-sm":"text-slate-300 hover:bg-slate-700/50","\n                "),onClick:()=>b(!1),children:[(0,a.jsx)(l,{size:18}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.label})]},e.id)})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-3 border-t border-slate-700 bg-slate-900",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,a.jsx)("div",{className:"w-9 h-9 bg-slate-700 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Z,{size:18,className:"text-slate-300"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:"運営"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"admin@example.com"})]})]}),(0,a.jsx)("button",{onClick:()=>{console.log("ログアウト"),t.push("/admin/login")},className:"p-1.5 hover:bg-slate-700 rounded-lg transition-all",title:"ログアウト",children:(0,a.jsx)(f.Z,{size:18,className:"text-slate-300"})})]})})]})]})}},4801:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(5893),l=t(7294),r=t(9008),i=t.n(r),n=t(1163),d=t(6909),c=t(8497),x=t(7918),o=t(8267),m=t(2217),h=t(2779),u=t(2542),p=t(4235),g=t(6111),j=t(437),f=t(6127);function N(){(0,n.useRouter)();let[e,s]=(0,l.useState)(!1),[t,r]=(0,l.useState)(""),[N,b]=(0,l.useState)("all"),[v,y]=(0,l.useState)("all"),[w,k]=(0,l.useState)("all"),[Z,C]=(0,l.useState)("today"),[z,_]=(0,l.useState)("timestamp"),[S,L]=(0,l.useState)("desc"),[E]=(0,l.useState)([]);return E.filter(e=>{let s=e.userName.toLowerCase().includes(t.toLowerCase())||e.storeName.toLowerCase().includes(t.toLowerCase())||e.id.toLowerCase().includes(t.toLowerCase()),a="all"===N||e.status===N,l="all"===v||e.type===v,r="all"===w||e.riskLevel===w;return s&&a&&l&&r}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i(),{children:(0,a.jsx)("title",{children:"取引管理 - Melty+ 管理"})}),(0,a.jsxs)("div",{className:"flex min-h-screen bg-white",children:[(0,a.jsx)(d.Z,{currentPage:"transactions"}),(0,a.jsxs)("main",{className:"flex-1 md:ml-64",children:[(0,a.jsx)("header",{className:"bg-white border-b border-slate-200 sticky top-0 z-30 h-14 shadow-sm",children:(0,a.jsxs)("div",{className:"h-full px-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>s(!e),className:"md:hidden p-1.5 hover:bg-slate-100 rounded-lg",children:(0,a.jsx)(c.Z,{size:20})}),(0,a.jsx)("div",{children:(0,a.jsx)("h1",{className:"text-lg font-semibold text-slate-900",children:"取引管理"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{className:"bg-white p-1.5 rounded-full text-slate-400 hover:text-slate-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-slate-500",children:(0,a.jsx)(x.Z,{size:18})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-slate-200 flex items-center justify-center",children:(0,a.jsx)(o.Z,{size:16,className:"text-slate-600"})}),(0,a.jsxs)("div",{className:"hidden md:block",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"運営"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"admin@example.com"})]})]})]})]})}),(0,a.jsx)("div",{className:"py-3",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold text-slate-900",children:"取引管理"}),(0,a.jsx)("p",{className:"text-slate-600 text-sm",children:"決済取引の監視・異常検知"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("button",{className:"flex items-center space-x-2 px-3 py-2 rounded-lg transition-colors bg-slate-100 text-slate-700 hover:bg-slate-200 text-sm",children:[(0,a.jsx)(m.Z,{size:14}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"リアルタイム監視"})]}),(0,a.jsxs)("button",{className:"flex items-center space-x-2 px-3 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 text-sm",children:[(0,a.jsx)(h.Z,{size:14}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"レポート"})]}),(0,a.jsxs)("button",{className:"flex items-center space-x-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:[(0,a.jsx)(u.Z,{size:14}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"アラート"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[(0,a.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-slate-700 rounded-lg",children:(0,a.jsx)(p.Z,{size:18,className:"text-slate-300"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"総取引数"}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900",children:15847..toLocaleString()})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-slate-700 rounded-lg",children:(0,a.jsx)(g.Z,{size:18,className:"text-slate-300"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"総取引額"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["\xa5",47856320..toLocaleString()]})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-slate-700 rounded-lg",children:(0,a.jsx)(j.Z,{size:18,className:"text-slate-300"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"成功率"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:[98.7,"%"]})]})]})}),(0,a.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,a.jsx)(u.Z,{size:18,className:"text-red-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"要確認取引"}),(0,a.jsx)("p",{className:"text-lg font-bold text-gray-900",children:23})]})]})})]}),(0,a.jsx)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-3 lg:space-y-0",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(f.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"取引ID、ユーザー名、店舗名で検索...",className:"pl-10 pr-4 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent w-full sm:w-80",value:t,onChange:e=>r(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsxs)("select",{className:"border border-gray-300 rounded-lg px-2.5 py-1.5 focus:ring-2 focus:ring-slate-500 focus:border-transparent",value:N,onChange:e=>b(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"全ステータス"}),(0,a.jsx)("option",{value:"completed",children:"完了"}),(0,a.jsx)("option",{value:"pending",children:"処理中"}),(0,a.jsx)("option",{value:"failed",children:"失敗"}),(0,a.jsx)("option",{value:"refunded",children:"返金済み"}),(0,a.jsx)("option",{value:"suspicious",children:"要確認"})]}),(0,a.jsxs)("select",{className:"border border-gray-300 rounded-lg px-2.5 py-1.5 focus:ring-2 focus:ring-slate-500 focus:border-transparent",value:v,onChange:e=>y(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"全タイプ"}),(0,a.jsx)("option",{value:"point_grant",children:"ポイント付与"}),(0,a.jsx)("option",{value:"point_redemption",children:"ポイント使用"}),(0,a.jsx)("option",{value:"gift_exchange",children:"ギフト交換"}),(0,a.jsx)("option",{value:"charge",children:"チャージ"}),(0,a.jsx)("option",{value:"refund",children:"返金"})]}),(0,a.jsxs)("select",{className:"border border-gray-300 rounded-lg px-2.5 py-1.5 focus:ring-2 focus:ring-slate-500 focus:border-transparent",value:w,onChange:e=>k(e.target.value),children:[(0,a.jsx)("option",{value:"all",children:"全リスク"}),(0,a.jsx)("option",{value:"low",children:"低リスク"}),(0,a.jsx)("option",{value:"medium",children:"中リスク"}),(0,a.jsx)("option",{value:"high",children:"高リスク"})]}),(0,a.jsxs)("select",{className:"border border-gray-300 rounded-lg px-2.5 py-1.5 focus:ring-2 focus:ring-slate-500 focus:border-transparent",value:Z,onChange:e=>C(e.target.value),children:[(0,a.jsx)("option",{value:"today",children:"今日"}),(0,a.jsx)("option",{value:"week",children:"過去7日"}),(0,a.jsx)("option",{value:"month",children:"過去30日"}),(0,a.jsx)("option",{value:"all",children:"全期間"})]})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"並び順:"}),(0,a.jsxs)("select",{className:"border border-gray-300 rounded-lg px-2.5 py-1.5 focus:ring-2 focus:ring-slate-500 focus:border-transparent",value:z,onChange:e=>_(e.target.value),children:[(0,a.jsx)("option",{value:"timestamp",children:"時刻"}),(0,a.jsx)("option",{value:"amount",children:"金額"}),(0,a.jsx)("option",{value:"riskScore",children:"リスクスコア"})]}),(0,a.jsx)("button",{className:"px-2.5 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50",onClick:()=>L("asc"===S?"desc":"asc"),children:"desc"===S?"↓":"↑"})]})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"取引ID"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ユーザー"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"店舗"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"タイプ"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"金額/ポイント"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ステータス"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"リスク"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"日時"}),(0,a.jsx)("th",{className:"px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"アクション"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200"})]})})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"text-sm text-gray-700",children:"0件中 0 - 0件を表示"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("button",{disabled:!0,className:"px-2.5 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"前へ"}),(0,a.jsx)("span",{className:"px-2.5 py-1.5 text-sm text-gray-700",children:"1 / 0"}),(0,a.jsx)("button",{className:"px-2.5 py-1.5 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"次へ"})]})]})]})})})]})]})]})}}},function(e){e.O(0,[1664,9045,2888,9774,179],function(){return e(e.s=3241)}),_N_E=e.O()}]);