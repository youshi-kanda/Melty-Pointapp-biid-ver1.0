(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2281],{1712:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/stores",function(){return t(3403)}])},6909:function(e,s,t){"use strict";t.d(s,{Z:function(){return N}});var a=t(5893),l=t(1163),r=t(1664),n=t.n(r),i=t(8979),d=t(9176),c=t(116),x=t(3750),o=t(9073),m=t(3633),h=t(5264),p=t(9305),u=t(2190),g=t(8497),j=t(3416),b=t(775),f=t(7294);function N(e){let{currentPage:s}=e,t=(0,l.useRouter)(),[r,N]=(0,f.useState)(!1),v=[{icon:i.Z,label:"ダッシュボード",href:"/admin",id:"dashboard"},{icon:d.Z,label:"ユーザー管理",href:"/admin/users",id:"users"},{icon:c.Z,label:"店舗管理",href:"/admin/stores",id:"stores"},{icon:x.Z,label:"取引管理",href:"/admin/transactions",id:"transactions"},{icon:o.Z,label:"ギフト管理",href:"/admin/gifts",id:"gifts"},{icon:m.Z,label:"レポート",href:"/admin/reports",id:"reports"},{icon:h.Z,label:"システム設定",href:"/admin/settings",id:"settings"},{icon:p.Z,label:"機能管理",href:"/admin/features",id:"features"}];return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>N(!r),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white rounded-lg shadow-lg",children:r?(0,a.jsx)(u.Z,{size:24}):(0,a.jsx)(g.Z,{size:24})}),r&&(0,a.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-40",onClick:()=>N(!1)}),(0,a.jsxs)("aside",{className:"\n          fixed top-0 left-0 h-full w-64 bg-slate-800 text-slate-300 shadow-2xl z-40 transform transition-transform duration-300\n          ".concat(r?"translate-x-0":"-translate-x-full","\n          lg:translate-x-0\n        "),children:[(0,a.jsx)("div",{className:"p-5 border-b border-slate-700",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(j.Z,{className:"w-10 h-10 text-white flex-shrink-0",strokeWidth:1.5}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold text-white whitespace-nowrap",children:"Melty+ 管理画面"}),(0,a.jsx)("p",{className:"text-slate-400 text-xs",children:"Admin Dashboard"})]})]})}),(0,a.jsx)("nav",{className:"p-3 space-y-1 overflow-y-auto h-[calc(100vh-165px)]",children:v.map(e=>{let l=e.icon,r=s===e.id||t.pathname===e.href;return(0,a.jsxs)(n(),{href:e.href,className:"\n                  flex items-center gap-2.5 px-3 py-2.5 rounded-lg transition-all\n                  ".concat(r?"bg-slate-700 text-white shadow-sm":"text-slate-300 hover:bg-slate-700/50","\n                "),onClick:()=>N(!1),children:[(0,a.jsx)(l,{size:18}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.label})]},e.id)})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-3 border-t border-slate-700 bg-slate-900",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,a.jsx)("div",{className:"w-9 h-9 bg-slate-700 rounded-full flex items-center justify-center",children:(0,a.jsx)(d.Z,{size:18,className:"text-slate-300"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white",children:"運営"}),(0,a.jsx)("p",{className:"text-xs text-slate-400",children:"admin@example.com"})]})]}),(0,a.jsx)("button",{onClick:()=>{console.log("ログアウト"),t.push("/admin/login")},className:"p-1.5 hover:bg-slate-700 rounded-lg transition-all",title:"ログアウト",children:(0,a.jsx)(b.Z,{size:18,className:"text-slate-300"})})]})})]})]})}},3403:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return b}});var a=t(5893),l=t(7294),r=t(9008),n=t.n(r),i=t(6909),d=t(4270),c=t(6127),x=t(1998),o=t(3350),m=t(1700),h=t(5928),p=t(4442),u=t(3050),g=t(7695),j=t(2190);function b(){let[e,s]=(0,l.useState)(""),[t,r]=(0,l.useState)("all"),[b,f]=(0,l.useState)("all"),[N,v]=(0,l.useState)(null),[y,w]=(0,l.useState)(!1),[k,Z]=(0,l.useState)(!1),[z]=(0,l.useState)([{id:1,name:"カフェ・ド・パリ 梅田店",area:"大阪",address:"大阪市北区梅田1-1-1",phone:"06-1234-5678",status:"active",pointRate:5,registeredDate:"2024-01-10",monthlyTransactions:156,totalRevenue:125e4},{id:2,name:"レストラン銀座",area:"東京",address:"東京都中央区銀座2-2-2",phone:"03-2345-6789",status:"active",pointRate:3,registeredDate:"2024-02-15",monthlyTransactions:203,totalRevenue:215e4},{id:3,name:"スイーツハウス",area:"大阪",address:"大阪市中央区心斎橋3-3-3",phone:"06-3456-7890",status:"pending",pointRate:0,registeredDate:"2024-10-20",monthlyTransactions:0,totalRevenue:0},{id:4,name:"イタリアンキッチン",area:"名古屋",address:"名古屋市中区栄4-4-4",phone:"052-4567-8901",status:"active",pointRate:4,registeredDate:"2024-03-01",monthlyTransactions:98,totalRevenue:89e4},{id:5,name:"ラーメン横丁",area:"福岡",address:"福岡市博多区5-5-5",phone:"092-5678-9012",status:"rejected",pointRate:0,registeredDate:"2024-09-15",monthlyTransactions:0,totalRevenue:0}]),C=z.filter(s=>{let a=s.name.toLowerCase().includes(e.toLowerCase())||s.address.toLowerCase().includes(e.toLowerCase()),l="all"===t||s.area===t,r="all"===b||s.status===b;return a&&l&&r}),R=["all",...Array.from(new Set(z.map(e=>e.area)))],_=e=>{v(e),w(!0)},S=e=>{v(e),Z(!0)},T=e=>{console.log("店舗承認:",e)},D=e=>{console.log("店舗拒否:",e)},E=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},L=e=>{switch(e){case"active":return"アクティブ";case"pending":return"承認待ち";case"rejected":return"拒否";default:return"不明"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{children:(0,a.jsx)("title",{children:"店舗管理 - Melty+ 管理"})}),(0,a.jsxs)("div",{className:"flex min-h-screen bg-white",children:[(0,a.jsx)(i.Z,{currentPage:"stores"}),(0,a.jsxs)("main",{className:"flex-1 lg:ml-64",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-slate-200 sticky top-0 z-30 h-14",children:(0,a.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold text-slate-900",children:"店舗管理"}),(0,a.jsx)("p",{className:"text-slate-600 text-xs mt-0.5",children:"加盟店の承認・管理"})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-3 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors text-sm",children:[(0,a.jsx)(d.Z,{size:14}),"新規店舗登録"]})]})}),(0,a.jsxs)("div",{className:"p-3",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 p-2.5 mb-3",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-2",children:[(0,a.jsxs)("div",{className:"flex-1 relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),(0,a.jsx)("input",{type:"text",placeholder:"店舗名、住所で検索...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-9 pr-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent text-sm"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(x.Z,{size:16,className:"text-slate-400"}),(0,a.jsx)("select",{value:t,onChange:e=>r(e.target.value),className:"px-2.5 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent text-sm",children:R.map(e=>(0,a.jsx)("option",{value:e,children:"all"===e?"全エリア":e},e))})]}),(0,a.jsxs)("select",{value:b,onChange:e=>f(e.target.value),className:"px-2.5 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-500 focus:border-transparent text-sm",children:[(0,a.jsx)("option",{value:"all",children:"全ステータス"}),(0,a.jsx)("option",{value:"active",children:"アクティブ"}),(0,a.jsx)("option",{value:"pending",children:"承認待ち"}),(0,a.jsx)("option",{value:"rejected",children:"拒否"})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-slate-50 border-b border-slate-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"店舗情報"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"エリア"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ポイント還元率"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"月間取引数"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ステータス"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-3 py-3",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:e.name}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[(0,a.jsx)(o.Z,{size:12}),e.address]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 flex items-center gap-1 mt-0.5",children:[(0,a.jsx)(m.Z,{size:12}),e.phone]})]})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2.5 py-0.5 bg-slate-600 text-slate-200 rounded-full text-xs font-medium",children:e.area})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:"active"===e.status?(0,a.jsxs)("span",{className:"text-slate-600 font-semibold text-sm",children:[e.pointRate,"%"]}):(0,a.jsx)("span",{className:"text-gray-400 text-sm",children:"未設定"})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-gray-900 text-sm",children:"active"===e.status?"".concat(e.monthlyTransactions,"回"):"-"}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(E(e.status)),children:L(e.status)})}),(0,a.jsx)("td",{className:"px-3 py-3 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,a.jsx)("button",{onClick:()=>_(e),className:"p-1.5 text-slate-600 hover:bg-slate-50 rounded-lg transition-colors",title:"詳細表示",children:(0,a.jsx)(h.Z,{size:16})}),(0,a.jsx)("button",{onClick:()=>S(e),className:"p-1.5 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"編集",children:(0,a.jsx)(p.Z,{size:16})}),"pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>T(e),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"承認",children:(0,a.jsx)(u.Z,{size:16})}),(0,a.jsx)("button",{onClick:()=>D(e),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"拒否",children:(0,a.jsx)(g.Z,{size:16})})]})]})})]},e.id))})]})})})]})]})]}),y&&N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-lg font-bold text-gray-900",children:"店舗詳細"}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"p-1.5 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(j.Z,{size:18})})]}),(0,a.jsxs)("div",{className:"p-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"基本情報"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"店舗名"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:N.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"エリア"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:N.area})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"住所"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:N.address})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"電話番号"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:N.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"登録日"}),(0,a.jsx)("p",{className:"font-medium text-gray-900",children:N.registeredDate})]})]})]}),"active"===N.status&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-3",children:"統計情報"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-3",children:[(0,a.jsxs)("div",{className:"p-3 bg-slate-700 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-slate-300 mb-0.5",children:"ポイント還元率"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-white",children:[N.pointRate,"%"]})]}),(0,a.jsxs)("div",{className:"p-3 bg-slate-700 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-slate-300 mb-0.5",children:"月間取引数"}),(0,a.jsxs)("p",{className:"text-xl font-bold text-white",children:[N.monthlyTransactions,"回"]})]}),(0,a.jsxs)("div",{className:"p-3 bg-slate-700 rounded-lg",children:[(0,a.jsx)("p",{className:"text-xs text-slate-300 mb-0.5",children:"総売上"}),(0,a.jsxs)("p",{className:"text-lg font-bold text-white",children:["\xa5",N.totalRevenue.toLocaleString()]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ステータス"}),(0,a.jsx)("div",{className:"p-4 rounded-lg ".concat("active"===N.status?"bg-green-50":"pending"===N.status?"bg-yellow-50":"bg-red-50"),children:(0,a.jsx)("p",{className:"text-sm font-medium ".concat("active"===N.status?"text-green-700":"pending"===N.status?"text-yellow-700":"text-red-700"),children:L(N.status)})})]})]})]})}),k&&N&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[(0,a.jsxs)("div",{className:"border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"店舗編集"}),(0,a.jsx)("button",{onClick:()=>Z(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(j.Z,{size:20})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ポイント還元率（%）"}),(0,a.jsx)("input",{type:"number",defaultValue:N.pointRate,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:"0",max:"100"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)("button",{onClick:()=>Z(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"キャンセル"}),(0,a.jsx)("button",{onClick:()=>Z(!1),className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"保存"})]})]})]})})]})}}},function(e){e.O(0,[1664,9135,2888,9774,179],function(){return e(e.s=1712)}),_N_E=e.O()}]);