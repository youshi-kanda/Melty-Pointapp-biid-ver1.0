(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3228],{2706:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/terminal/processing",function(){return r(6598)}])},1134:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var s=r(7294);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=a(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,t)=>{let{color:r="currentColor",size:l=24,strokeWidth:a=2,absoluteStrokeWidth:n,className:d="",children:u,iconNode:m,...x}=e;return(0,s.createElement)("svg",{ref:t,...o,width:l,height:l,stroke:r,strokeWidth:n?24*Number(a)/Number(l):a,className:c("lucide",d),...!u&&!i(x)&&{"aria-hidden":"true"},...x},[...m.map(e=>{let[t,r]=e;return(0,s.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,s.forwardRef)((r,a)=>{let{className:i,...o}=r;return(0,s.createElement)(d,{ref:a,iconNode:t,className:c("lucide-".concat(l(n(e))),"lucide-".concat(e),i),...o})});return r.displayName=n(e),r}},3645:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},7695:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(1134).Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},6598:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(5893),l=r(7294),a=r(1163),n=r(9008),c=r.n(n);let i=(0,r(1134).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var o=r(3645),d=r(7695);function u(){let e=(0,a.useRouter)(),{userId:t,amount:r,points:n,withPoints:u}=e.query,[m,x]=(0,l.useState)("processing"),[h,b]=(0,l.useState)(0);return(0,l.useEffect)(()=>{let s=setInterval(()=>{b(e=>e>=90?e:e+10)},200),l=setTimeout(()=>{clearInterval(s),b(100),Math.random()>.05?(x("success"),setTimeout(()=>{e.push("/terminal/payment-complete?userId=".concat(t,"&amount=").concat(r,"&points=").concat(n,"&withPoints=").concat(u||"false"))},1500)):x("error")},3e3);return()=>{clearInterval(s),clearTimeout(l)}},[e,t,r,n,u]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c(),{children:(0,s.jsxs)("title",{children:["processing"===m&&"決済処理中","success"===m&&"決済成功","error"===m&&"決済エラー","- Melty+ Terminal"]})}),(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:["processing"===m&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsxs)("div",{className:"relative inline-block",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-blue-100 rounded-full flex items-center justify-center animate-pulse",children:(0,s.jsx)(i,{size:48,className:"text-blue-600 animate-spin"})}),(0,s.jsx)("div",{className:"absolute inset-0 border-4 border-blue-200 border-t-blue-600 rounded-full animate-spin"})]})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済処理中"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"しばらくお待ちください..."}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-300 ease-out",style:{width:"".concat(h,"%")}})}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mt-2",children:[h,"%"]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 mt-6",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"決済金額"}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:["\xa5",(parseInt(r)-parseInt(n||"0")).toLocaleString()]}),parseInt(n||"0")>0&&(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["ポイント使用: ",parseInt(n).toLocaleString(),"pt"]})]}),(0,s.jsx)("div",{className:"mt-6 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-xs text-amber-800",children:"※ 処理が完了するまでお待ちください"})})]}),"success"===m&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto animate-bounce",children:(0,s.jsx)(o.Z,{size:48,className:"text-green-600"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済成功！"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"完了画面へ移動します..."}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-1",children:"決済金額"}),(0,s.jsxs)("div",{className:"text-3xl font-bold text-green-600",children:["\xa5",(parseInt(r)-parseInt(n||"0")).toLocaleString()]})]})]}),"error"===m&&(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"w-24 h-24 bg-red-100 rounded-full flex items-center justify-center mx-auto",children:(0,s.jsx)(d.Z,{size:48,className:"text-red-600"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"決済エラー"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"決済処理に失敗しました"}),(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,s.jsxs)("p",{className:"text-sm text-red-800",children:["通信エラーまたはシステムエラーが発生しました。",(0,s.jsx)("br",{}),"もう一度お試しいただくか、スタッフにお声がけください。"]})}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:()=>{x("processing"),b(0),e.push("/terminal/payment-confirm?userId=".concat(t,"&amount=").concat(r,"&points=").concat(n))},className:"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white font-bold py-4 rounded-lg transition-all shadow-md hover:shadow-lg active:scale-98",children:"再試行"}),(0,s.jsx)("button",{onClick:()=>{e.push("/terminal/")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 rounded-lg transition-colors",children:"キャンセル"})]})]})]})})]})}},9008:function(e,t,r){e.exports=r(3867)},1163:function(e,t,r){e.exports=r(3079)}},function(e){e.O(0,[2888,9774,179],function(){return e(e.s=2706)}),_N_E=e.O()}]);